<html>
<body>
<table>
<tr>
<td><canvas id='lab01' height='400' width='400' style='border:1px solid;'></td>
<td><canvas id='lab02' height='398' width='398' style='border:1px solid;'></td>
</tr>
</table>
<script>
	let canvas = document.getElementById('lab01');
	let ctx = canvas.getContext('2d');
	let canvas1 = document.getElementById('lab02');
	let ctx1 = canvas1.getContext('2d');

	let img = new Image();
	img.crossOrigin = '';
	img.src="17771720";
	img.onload = function() {
		ctx.drawImage(img,0,0);
	}
	canvas.addEventListener('click', Sobel);	
	function Sobel() {
		let out = new Array(158404);
		
		let pix = ctx.getImageData(0,0,canvas.width, canvas.height);
		let arr = pix.data;
		for (y=1;y<canvas.height-1;y++) {
			for (x=1;x<canvas.width-1;x++) {
				Ry=-1*arr[(x-401+y*canvas.width)*4]-2*arr[(x-40+y*canvas.width)*4]-1*arr[(x-399+y*canvas.width)*4]+*arr[(x-1+400+y*canvas.width)*4]-2*arr[(x+400+y*canvas.width)*4]-1*arr[(x+401+y*canvas.width)*4];
				Rx=-1*arr[(x-401+y*canvas.width)*4]+arr[(x-399+y*canvas.width)*4]-
*arr[(x-1+y*canvas.width)*4]+2*arr[(x+1+y*canvas.width)*4]-1*arr[(x-1+400+y*canvas.width)*4]+arr[(x+401+y*canvas.width)*4];
				R=Math.sqrt(Rx*Rx+Ry*Ry);
				out[y*398+x]=R;
			}
		}
		for (y=0;y<canvas.height;y++) {
			for (x=0;x<canvas.width;x++) {
			
		
</script>
</body>
</html>
